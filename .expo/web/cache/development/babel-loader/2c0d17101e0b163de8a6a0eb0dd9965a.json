{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _excluded = [\"style\", \"containerStyle\", \"children\", \"indicatorColor\", \"indicatorOpacity\", \"indicatorPosition\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport PropTypes from 'prop-types';\nimport React, { PureComponent, Children } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { ViewPropTypes } from \"react-native-web/dist/index\";\nimport Indicator from \"../indicator\";\nimport styles from \"./styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar floatEpsilon = Math.pow(2, -23);\n\nfunction equal(a, b) {\n  return Math.abs(a - b) <= floatEpsilon * Math.max(Math.abs(a), Math.abs(b));\n}\n\nvar Pages = function (_PureComponent) {\n  _inherits(Pages, _PureComponent);\n\n  var _super = _createSuper(Pages);\n\n  function Pages(props) {\n    var _this;\n\n    _classCallCheck(this, Pages);\n\n    _this = _super.call(this, props);\n    _this.onLayout = _this.onLayout.bind(_assertThisInitialized(_this));\n    _this.onScroll = _this.onScroll.bind(_assertThisInitialized(_this));\n    _this.onScrollBeginDrag = _this.onScrollBeginDrag.bind(_assertThisInitialized(_this));\n    _this.onScrollEndDrag = _this.onScrollEndDrag.bind(_assertThisInitialized(_this));\n    _this.scrollRef = React.createRef();\n    var _this$props = _this.props,\n        startPage = _this$props.startPage,\n        _this$props$progress = _this$props.progress,\n        progress = _this$props$progress === void 0 ? new Animated.Value(startPage) : _this$props$progress;\n    _this.progress = startPage;\n    _this.mounted = false;\n    _this.scrollState = -1;\n    _this.activeIndex = startPage;\n    _this.state = {\n      layout: false,\n      width: 0,\n      height: 0,\n      progress: progress\n    };\n    return _this;\n  }\n\n  _createClass(Pages, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.mounted = true;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this2 = this;\n\n      if (-1 === this.scrollState) {\n        requestAnimationFrame(function () {\n          _this2.scrollToPage(Math.floor(_this2.progress), false);\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mounted = false;\n    }\n  }, {\n    key: \"onLayout\",\n    value: function onLayout(event) {\n      var _event$nativeEvent$la = event.nativeEvent.layout,\n          width = _event$nativeEvent$la.width,\n          height = _event$nativeEvent$la.height;\n      var onLayout = this.props.onLayout;\n\n      if ('function' === typeof onLayout) {\n        onLayout(event);\n      }\n\n      this.setState({\n        width: width,\n        height: height,\n        layout: true\n      });\n    }\n  }, {\n    key: \"onScroll\",\n    value: function onScroll(event) {\n      if (-1 === this.scrollState) {\n        return;\n      }\n\n      var horizontal = this.props.horizontal;\n      var offset = event.nativeEvent.contentOffset[horizontal ? 'x' : 'y'];\n      var _this$state = this.state,\n          base = _this$state[horizontal ? 'width' : 'height'],\n          progress = _this$state.progress;\n      progress.setValue(this.progress = base ? offset / base : 0);\n      var discreteProgress = Math.round(this.progress);\n\n      if (this.activeIndex !== discreteProgress) {\n        this.onHalfway(discreteProgress);\n      }\n\n      if (1 === this.scrollState && equal(discreteProgress, this.progress)) {\n        this.onScrollEnd();\n        this.scrollState = -1;\n      }\n    }\n  }, {\n    key: \"onScrollBeginDrag\",\n    value: function onScrollBeginDrag() {\n      var onScrollStart = this.props.onScrollStart;\n\n      if ('function' === typeof onScrollStart) {\n        onScrollStart(Math.round(this.progress));\n      }\n\n      this.scrollState = 0;\n    }\n  }, {\n    key: \"onScrollEndDrag\",\n    value: function onScrollEndDrag() {\n      var horizontal = this.props.horizontal;\n\n      if ('android' === Platform.OS && !horizontal) {\n        this.scrollToPage(Math.round(this.progress));\n      }\n\n      this.scrollState = 1;\n    }\n  }, {\n    key: \"onScrollEnd\",\n    value: function onScrollEnd() {\n      var onScrollEnd = this.props.onScrollEnd;\n\n      if ('function' === typeof onScrollEnd) {\n        onScrollEnd(Math.round(this.progress));\n      }\n    }\n  }, {\n    key: \"onHalfway\",\n    value: function onHalfway(nextIndex) {\n      var onHalfway = this.props.onHalfway;\n\n      if ('function' === typeof onHalfway && nextIndex >= 0) {\n        onHalfway(nextIndex, this.activeIndex);\n      }\n\n      this.activeIndex = nextIndex;\n    }\n  }, {\n    key: \"scrollToPage\",\n    value: function scrollToPage(page) {\n      var animated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var horizontal = this.props.horizontal;\n      var base = this.state[horizontal ? 'width' : 'height'];\n      var scroll = this.scrollRef.current;\n\n      if (animated) {\n        this.scrollState = 1;\n      }\n\n      if (this.mounted && scroll) {\n        var _scroll$scrollTo;\n\n        scroll.scrollTo((_scroll$scrollTo = {}, _defineProperty(_scroll$scrollTo, horizontal ? 'x' : 'y', page * base), _defineProperty(_scroll$scrollTo, \"animated\", animated), _scroll$scrollTo));\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return 0 === this.scrollState;\n    }\n  }, {\n    key: \"isDecelerating\",\n    value: function isDecelerating() {\n      return 1 === this.scrollState;\n    }\n  }, {\n    key: \"renderPage\",\n    value: function renderPage(page, index) {\n      var _this$state2 = this.state,\n          width = _this$state2.width,\n          height = _this$state2.height,\n          progress = _this$state2.progress;\n      var _this$props2 = this.props,\n          children = _this$props2.children,\n          horizontal = _this$props2.horizontal,\n          rtl = _this$props2.rtl;\n      var pages = Children.count(children);\n      var pageStyle = horizontal && rtl ? styles.rtl : null;\n      progress = Animated.add(progress, -index);\n      var props = {\n        index: index,\n        pages: pages,\n        progress: progress,\n        collapsable: false\n      };\n      return _jsx(View, {\n        style: [{\n          width: width,\n          height: height\n        }, pageStyle],\n        children: React.cloneElement(page, props)\n      });\n    }\n  }, {\n    key: \"renderPager\",\n    value: function renderPager(pager) {\n      var _this$props3 = this.props,\n          renderPager = _this$props3.renderPager,\n          horizontal = _this$props3.horizontal,\n          rtl = _this$props3.rtl;\n\n      if ('function' === typeof renderPager) {\n        return renderPager(_objectSpread({\n          horizontal: horizontal,\n          rtl: rtl\n        }, pager));\n      }\n\n      var indicatorPosition = pager.indicatorPosition;\n\n      if ('none' === indicatorPosition) {\n        return null;\n      }\n\n      var indicatorStyle = horizontal && rtl ? styles.rtl : null;\n      var style = [styles[indicatorPosition], indicatorStyle];\n      return _jsx(SafeAreaView, {\n        style: style,\n        pointerEvents: \"none\",\n        children: _jsx(Indicator, _objectSpread({}, pager))\n      });\n    }\n  }, {\n    key: \"renderPages\",\n    value: function renderPages(props) {\n      var _contentOffset;\n\n      var _this$props4 = this.props,\n          horizontal = _this$props4.horizontal,\n          rtl = _this$props4.rtl,\n          style = _this$props4.style,\n          children = _this$props4.children;\n      var _this$state3 = this.state,\n          base = _this$state3[horizontal ? 'width' : 'height'],\n          layout = _this$state3.layout;\n\n      if (!layout) {\n        return null;\n      }\n\n      var scrollStyle = horizontal && rtl ? styles.rtl : null;\n      var contentOffset = (_contentOffset = {}, _defineProperty(_contentOffset, horizontal ? 'x' : 'y', base * Math.floor(this.progress)), _defineProperty(_contentOffset, horizontal ? 'y' : 'x', 0), _contentOffset);\n      return _jsx(ScrollView, _objectSpread(_objectSpread({}, props), {}, {\n        style: [styles.container, style, scrollStyle],\n        onScroll: this.onScroll,\n        onScrollBeginDrag: this.onScrollBeginDrag,\n        onScrollEndDrag: this.onScrollEndDrag,\n        contentOffset: contentOffset,\n        ref: this.scrollRef,\n        children: Children.map(children, this.renderPage, this)\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var progress = this.state.progress;\n      var horizontal = this.props.horizontal;\n\n      var _this$props5 = this.props,\n          style = _this$props5.style,\n          containerStyle = _this$props5.containerStyle,\n          children = _this$props5.children,\n          indicatorColor = _this$props5.indicatorColor,\n          indicatorOpacity = _this$props5.indicatorOpacity,\n          _this$props5$indicato = _this$props5.indicatorPosition,\n          indicatorPosition = _this$props5$indicato === void 0 ? horizontal ? 'bottom' : 'right' : _this$props5$indicato,\n          props = _objectWithoutProperties(_this$props5, _excluded);\n\n      var pages = Children.count(children);\n\n      var Pager = function Pager() {\n        return _this3.renderPager({\n          pages: pages,\n          progress: progress,\n          indicatorColor: indicatorColor,\n          indicatorOpacity: indicatorOpacity,\n          indicatorPosition: indicatorPosition\n        });\n      };\n\n      return _jsxs(View, {\n        style: [styles.container, containerStyle],\n        onLayout: this.onLayout,\n        children: [this.renderPages(props), _jsx(Pager, {})]\n      });\n    }\n  }]);\n\n  return Pages;\n}(PureComponent);\n\nPages.defaultProps = {\n  pagingEnabled: true,\n  nestedScrollEnabled: true,\n  showsHorizontalScrollIndicator: false,\n  showsVerticalScrollIndicator: false,\n  scrollEventThrottle: 25,\n  scrollsToTop: false,\n  indicatorColor: 'rgb(255, 255, 255)',\n  indicatorOpacity: 0.30,\n  startPage: 0,\n  horizontal: true,\n  rtl: false\n};\nPages.propTypes = {\n  style: ViewPropTypes.style,\n  containerStyle: ViewPropTypes.style,\n  indicatorColor: PropTypes.string,\n  indicatorOpacity: PropTypes.number,\n  indicatorPosition: PropTypes.oneOf(['none', 'top', 'right', 'bottom', 'left']),\n  startPage: PropTypes.number,\n  progress: PropTypes.instanceOf(Animated.Value),\n  horizontal: PropTypes.bool,\n  rtl: PropTypes.bool,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n  onLayout: PropTypes.func,\n  onScrollStart: PropTypes.func,\n  onScrollEnd: PropTypes.func,\n  onHalfway: PropTypes.func,\n  renderPager: PropTypes.func\n};\nexport { Pages as default };","map":{"version":3,"sources":["C:/Users/lnr99/Documents/WhaleDone-Client/node_modules/react-native-pages/src/components/pages/index.js"],"names":["PropTypes","React","PureComponent","Children","ViewPropTypes","Indicator","styles","floatEpsilon","Math","pow","equal","a","b","abs","max","Pages","props","onLayout","bind","onScroll","onScrollBeginDrag","onScrollEndDrag","scrollRef","createRef","startPage","progress","Animated","Value","mounted","scrollState","activeIndex","state","layout","width","height","requestAnimationFrame","scrollToPage","floor","event","nativeEvent","setState","horizontal","offset","contentOffset","base","setValue","discreteProgress","round","onHalfway","onScrollEnd","onScrollStart","Platform","OS","nextIndex","page","animated","scroll","current","scrollTo","index","children","rtl","pages","count","pageStyle","add","collapsable","cloneElement","pager","renderPager","indicatorPosition","indicatorStyle","style","scrollStyle","container","map","renderPage","containerStyle","indicatorColor","indicatorOpacity","Pager","renderPages","defaultProps","pagingEnabled","nestedScrollEnabled","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","scrollEventThrottle","scrollsToTop","propTypes","string","number","oneOf","instanceOf","bool","oneOfType","arrayOf","node","func"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { PureComponent, Children } from 'react';\nimport {\n  View,\n  ScrollView,\n  SafeAreaView,\n  Animated,\n  Platform,\n  ViewPropTypes,\n} from 'react-native';\n\nimport Indicator from '../indicator';\nimport styles from './styles';\n\nconst floatEpsilon = Math.pow(2, -23);\n\nfunction equal(a, b) {\n  return Math.abs(a - b) <= floatEpsilon * Math.max(Math.abs(a), Math.abs(b));\n}\n\nexport default class Pages extends PureComponent {\n  static defaultProps = {\n    pagingEnabled: true,\n    nestedScrollEnabled: true,\n    showsHorizontalScrollIndicator: false,\n    showsVerticalScrollIndicator: false,\n    scrollEventThrottle: 25,\n    scrollsToTop: false,\n\n    indicatorColor: 'rgb(255, 255, 255)',\n    indicatorOpacity: 0.30,\n\n    startPage: 0,\n\n    horizontal: true,\n    rtl: false,\n  };\n\n  static propTypes = {\n    style: ViewPropTypes.style,\n    containerStyle: ViewPropTypes.style,\n\n    indicatorColor: PropTypes.string,\n    indicatorOpacity: PropTypes.number,\n    indicatorPosition: PropTypes.oneOf([\n      'none',\n      'top',\n      'right',\n      'bottom',\n      'left',\n    ]),\n\n    startPage: PropTypes.number,\n    progress: PropTypes.instanceOf(Animated.Value),\n\n    horizontal: PropTypes.bool,\n    rtl: PropTypes.bool,\n\n    children: PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.node),\n      PropTypes.node,\n    ]),\n\n    onLayout: PropTypes.func,\n    onScrollStart: PropTypes.func,\n    onScrollEnd: PropTypes.func,\n    onHalfway: PropTypes.func,\n\n    renderPager: PropTypes.func,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.onLayout = this.onLayout.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n    this.onScrollBeginDrag = this.onScrollBeginDrag.bind(this);\n    this.onScrollEndDrag = this.onScrollEndDrag.bind(this);\n\n    this.scrollRef = React.createRef();\n\n    let { startPage, progress = new Animated.Value(startPage) } = this.props;\n\n    this.progress = startPage;\n    this.mounted = false;\n    this.scrollState = -1;\n    this.activeIndex = startPage;\n\n    this.state = {\n      layout: false,\n      width: 0,\n      height: 0,\n      progress,\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate() {\n    if (-1 === this.scrollState) {\n      /* Fix scroll position after layout update */\n      requestAnimationFrame(() => {\n        this.scrollToPage(Math.floor(this.progress), false);\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onLayout(event) {\n    let { width, height } = event.nativeEvent.layout;\n    let { onLayout } = this.props;\n\n    if ('function' === typeof onLayout) {\n      onLayout(event);\n    }\n\n    this.setState({ width, height, layout: true });\n  }\n\n  onScroll(event) {\n    if (-1 === this.scrollState) {\n      return;\n    }\n\n    let { horizontal } = this.props;\n    let { [horizontal? 'x' : 'y']: offset } = event.nativeEvent.contentOffset;\n    let { [horizontal? 'width' : 'height']: base, progress } = this.state;\n\n    progress.setValue(this.progress = base? offset / base : 0);\n\n    let discreteProgress = Math.round(this.progress);\n\n    if (this.activeIndex !== discreteProgress) {\n      this.onHalfway(discreteProgress);\n    }\n\n    if (1 === this.scrollState && equal(discreteProgress, this.progress)) {\n      this.onScrollEnd();\n\n      this.scrollState = -1;\n    }\n  }\n\n  onScrollBeginDrag() {\n    let { onScrollStart } = this.props;\n\n    if ('function' === typeof onScrollStart) {\n      onScrollStart(Math.round(this.progress));\n    }\n\n    this.scrollState = 0;\n  }\n\n  onScrollEndDrag() {\n    let { horizontal } = this.props;\n\n    /* Vertical pagination is not working on android, scroll by hands */\n    if ('android' === Platform.OS && !horizontal) {\n      this.scrollToPage(Math.round(this.progress));\n    }\n\n    this.scrollState = 1;\n  }\n\n  onScrollEnd() {\n    let { onScrollEnd } = this.props;\n\n    if ('function' === typeof onScrollEnd) {\n      onScrollEnd(Math.round(this.progress));\n    }\n  }\n\n  onHalfway(nextIndex) {\n    let { onHalfway } = this.props;\n\n    if ('function' === typeof onHalfway && nextIndex >= 0) {\n      onHalfway(nextIndex, this.activeIndex);\n    }\n\n    this.activeIndex = nextIndex;\n  }\n\n  scrollToPage(page, animated = true) {\n    let { horizontal } = this.props;\n    let { [horizontal? 'width' : 'height']: base } = this.state;\n    let { current: scroll } = this.scrollRef;\n\n    if (animated) {\n      this.scrollState = 1;\n    }\n\n    if (this.mounted && scroll) {\n      scroll.scrollTo({\n        [horizontal? 'x' : 'y']: page * base,\n        animated,\n      });\n    }\n  }\n\n  isDragging() {\n    return 0 === this.scrollState;\n  }\n\n  isDecelerating() {\n    return 1 === this.scrollState;\n  }\n\n  renderPage(page, index) {\n    let { width, height, progress } = this.state;\n    let { children, horizontal, rtl } = this.props;\n\n    let pages = Children.count(children);\n\n    let pageStyle = (horizontal && rtl)?\n      styles.rtl:\n      null;\n\n    /* Adjust progress by page index */\n    progress = Animated.add(progress, -index);\n\n    let props = {\n      index,\n      pages,\n      progress,\n      collapsable: false,\n    };\n\n    return (\n      <View style={[{ width, height }, pageStyle]}>\n        {React.cloneElement(page, props)}\n      </View>\n    );\n  }\n\n  renderPager(pager) {\n    let { renderPager, horizontal, rtl } = this.props;\n\n    if ('function' === typeof renderPager) {\n      return renderPager({ horizontal, rtl, ...pager });\n    }\n\n    let { indicatorPosition } = pager;\n\n    if ('none' === indicatorPosition) {\n      return null;\n    }\n\n    let indicatorStyle = (horizontal && rtl)?\n      styles.rtl:\n      null;\n\n    let style = [styles[indicatorPosition], indicatorStyle];\n\n    return (\n      <SafeAreaView style={style} pointerEvents='none'>\n        <Indicator {...pager} />\n      </SafeAreaView>\n    );\n  }\n\n  renderPages(props) {\n    let { horizontal, rtl, style, children } = this.props;\n    let { [horizontal? 'width' : 'height']: base, layout } = this.state;\n\n    if (!layout) {\n      return null;\n    }\n\n    let scrollStyle = (horizontal && rtl)?\n      styles.rtl:\n      null;\n\n    let contentOffset = {\n      [horizontal? 'x' : 'y']: base * Math.floor(this.progress),\n      [horizontal? 'y' : 'x']: 0,\n    };\n\n    return (\n      <ScrollView\n        {...props}\n        style={[styles.container, style, scrollStyle]}\n        onScroll={this.onScroll}\n        onScrollBeginDrag={this.onScrollBeginDrag}\n        onScrollEndDrag={this.onScrollEndDrag}\n        contentOffset={contentOffset}\n        ref={this.scrollRef}\n      >\n        {Children.map(children, this.renderPage, this)}\n      </ScrollView>\n    );\n  }\n\n  render() {\n    let { progress } = this.state;\n    let { horizontal } = this.props;\n    let {\n      style,\n      containerStyle,\n      children,\n      indicatorColor,\n      indicatorOpacity,\n      indicatorPosition = horizontal? 'bottom' : 'right',\n      ...props\n    } = this.props;\n\n    let pages = Children.count(children);\n\n    let Pager = () => (\n      this.renderPager({\n        pages,\n        progress,\n        indicatorColor,\n        indicatorOpacity,\n        indicatorPosition,\n      })\n    );\n\n    return (\n      <View style={[styles.container, containerStyle]} onLayout={this.onLayout}>\n        {this.renderPages(props)}\n\n        <Pager />\n      </View>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}